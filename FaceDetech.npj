{
    "scene_array": [
        {
            "data": "{\n    \"connections\": [\n        {\n            \"in_id\": \"{24a485d6-df8f-4c3c-acb9-61e20b55e53d}\",\n            \"in_index\": 0,\n            \"out_id\": \"{a4d4a8b2-c5cc-4235-94bf-581c90b8e44d}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{4e6f361d-ca7c-4bd9-95a2-89070fc1ffc7}\",\n            \"in_index\": 0,\n            \"out_id\": \"{4b805b48-2ec6-4576-99d1-cbe4365c01b2}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{4b805b48-2ec6-4576-99d1-cbe4365c01b2}\",\n            \"in_index\": 0,\n            \"out_id\": \"{dfd88bca-0844-484b-b6b0-138e3d4e5887}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{dfd88bca-0844-484b-b6b0-138e3d4e5887}\",\n            \"in_index\": 0,\n            \"out_id\": \"{4b805b48-2ec6-4576-99d1-cbe4365c01b2}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{0651c316-5fa7-46b9-bd61-22612af6320d}\",\n            \"in_index\": 0,\n            \"out_id\": \"{4b805b48-2ec6-4576-99d1-cbe4365c01b2}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{a4d4a8b2-c5cc-4235-94bf-581c90b8e44d}\",\n            \"in_index\": 0,\n            \"out_id\": \"{4e6f361d-ca7c-4bd9-95a2-89070fc1ffc7}\",\n            \"out_index\": 0\n        },\n        {\n            \"in_id\": \"{2c870f00-0d67-4aef-a5bd-8ab2bca1986d}\",\n            \"in_index\": 0,\n            \"out_id\": \"{24a485d6-df8f-4c3c-acb9-61e20b55e53d}\",\n            \"out_index\": 0\n        }\n    ],\n    \"nodes\": [\n        {\n            \"id\": \"{a4d4a8b2-c5cc-4235-94bf-581c90b8e44d}\",\n            \"model\": {\n                \"delay_time\": 100,\n                \"name\": \"Delay\",\n                \"node_enable\": true\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"x\": -253,\n                \"y\": 21.999999999999993\n            }\n        },\n        {\n            \"id\": \"{dfd88bca-0844-484b-b6b0-138e3d4e5887}\",\n            \"model\": {\n                \"name\": \"ButtonRun\"\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"x\": -686.4000000000001,\n                \"y\": -177.1\n            }\n        },\n        {\n            \"id\": \"{4b805b48-2ec6-4576-99d1-cbe4365c01b2}\",\n            \"model\": {\n                \"data\": {\n                    \"camera_device\": \"0 : HD WebCam\"\n                },\n                \"name\": \"WebCam\",\n                \"node_enable\": true\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"x\": -511.5,\n                \"y\": -177.5\n            }\n        },\n        {\n            \"id\": \"{2c870f00-0d67-4aef-a5bd-8ab2bca1986d}\",\n            \"model\": {\n                \"height\": 385,\n                \"name\": \"Debug\",\n                \"output_h\": 0,\n                \"output_v\": 0,\n                \"page_index\": 2,\n                \"payload_h\": 0,\n                \"payload_v\": 0,\n                \"width\": 519\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"x\": 171.39239999999987,\n                \"y\": -486.4434\n            }\n        },\n        {\n            \"id\": \"{0651c316-5fa7-46b9-bd61-22612af6320d}\",\n            \"model\": {\n                \"data\": {\n                },\n                \"name\": \"FaceTrainer\",\n                \"node_enable\": true\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"x\": -414.19999999999993,\n                \"y\": 22.600000000000005\n            }\n        },\n        {\n            \"id\": \"{4e6f361d-ca7c-4bd9-95a2-89070fc1ffc7}\",\n            \"model\": {\n                \"data\": {\n                    \"face_only\": false,\n                    \"font_scale\": 1.05,\n                    \"font_thickness\": 2,\n                    \"max_distance\": 25,\n                    \"rect_thickness\": 2,\n                    \"result_drawing\": true,\n                    \"show_distance\": true,\n                    \"text_drawing\": true,\n                    \"thresh\": 80,\n                    \"txt_offset\": 10\n                },\n                \"name\": \"FaceRec\",\n                \"node_enable\": true\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"x\": -278.30000000000007,\n                \"y\": -178.19999999999993\n            }\n        },\n        {\n            \"id\": \"{24a485d6-df8f-4c3c-acb9-61e20b55e53d}\",\n            \"model\": {\n                \"data\": {\n                    \"comment\": \"\",\n                    \"py_ver\": \"2. Python310\",\n                    \"script\": \"import mysql.connector\\nimport requests\\nimport datetime\\n\\ndef sendline(msg):\\n    url = 'https://notify-api.line.me/api/notify'\\n    token = 'lJJq0F5Abeb6e9ZGuG9w355nvqLsUjLumYlhzCnAKrK'\\n    headers = {'content-type':'application/x-www-form-urlencoded','Authorization':'Bearer '+token}\\n\\n    r = requests.post(url, headers=headers, data = {'message':msg})\\n    return r.ok\\n\\nmydb = mysql.connector.connect (\\n     host = \\\"localhost\\\",\\n     user = \\\"root\\\",\\n     password = \\\"\\\",\\n     database = \\\"face_db\\\"\\n)\\n\\nmycursor = mydb.cursor()\\n\\ndd = datetime.datetime.now()\\n\\nobjects = payload[\\\"FaceRec\\\"][\\\"face_array\\\"]\\nface_count = payload[\\\"FaceRec\\\"][\\\"count\\\"]\\n\\nif (face_count <=0) :\\n    print(\\\"ไม่พบข้อมูลใบหน้า\\\")\\n    payload[\\\"show_message\\\"] = \\\"ไม่พบข้อมูลใบหน้า\\\"\\nelse :\\n    for objs in objects :\\n        sql = \\\"select * from tbl_students where std_code = %s\\\"\\n        val = (objs[\\\"name\\\"], )\\n        mycursor.execute(sql,val)\\n        records = mycursor.fetchall()\\n        if (mycursor.rowcount <= 0) :\\n            print(\\\"ไม่พบข้อมูล \\\",objs[\\\"name\\\"],\\\"ในฐานข้อมูล\\\")\\n        else :\\n            std_name = records[0][1]+records[0][2]+\\\" \\\"+records[0][3] \\n            sql = \\\"select datetime, send_line from tbl_checkin where std_code = %s and DATE(datetime) = %s \\\"\\n            val = (objs[\\\"name\\\"], dd.strftime(\\\"%Y-%m-%d\\\"), )\\n            mycursor.execute(sql,val)\\n            records = mycursor.fetchall()\\n            if (mycursor.rowcount <=0):\\n                sql = \\\"insert into tbl_checkin (check_id, datetime, std_code, send_line) values(NULL, %s, %s, '0')\\\"\\n                val = (dd.strftime(\\\"%Y-%m-%d %H:%M\\\"), objs[\\\"name\\\"], )\\n                mycursor.execute(sql,val)\\n                mydb.commit()\\n            \\n                \\n                msg = \\\"บันทึกข้อมูลลงเวลา ของ \\\"+std_name+\\\" เมื่อ \\\"+dd.strftime(\\\"%Y-%m-%d %H:%M\\\")\\n                sl = sendline(msg)\\n            \\n                if(sl) :\\n                    sql = \\\"update tbl_checkin set send_line = '1' where std_code = %s\\\"\\n                    val = (objs[\\\"name\\\"], )\\n                    mycursor.execute(sql,val)\\n                    mydb.commit()\",\n                    \"tmp_path\": \"C:/Users/User\"\n                },\n                \"height\": 47,\n                \"name\": \"PythonScript\",\n                \"node_enable\": true,\n                \"python_code\": \"import mysql.connector\\nimport requests\\nimport datetime\\n\\ndef sendline(msg):\\n    url = 'https://notify-api.line.me/api/notify'\\n    token = 'lJJq0F5Abeb6e9ZGuG9w355nvqLsUjLumYlhzCnAKrK'\\n    headers = {'content-type':'application/x-www-form-urlencoded','Authorization':'Bearer '+token}\\n\\n    r = requests.post(url, headers=headers, data = {'message':msg})\\n    return r.ok\\n\\nmydb = mysql.connector.connect (\\n     host = \\\"localhost\\\",\\n     user = \\\"root\\\",\\n     password = \\\"\\\",\\n     database = \\\"face_db\\\"\\n)\\n\\nmycursor = mydb.cursor()\\n\\ndd = datetime.datetime.now()\\n\\nobjects = payload[\\\"FaceRec\\\"][\\\"face_array\\\"]\\nface_count = payload[\\\"FaceRec\\\"][\\\"count\\\"]\\n\\nif (face_count <=0) :\\n    print(\\\"ไม่พบข้อมูลใบหน้า\\\")\\n    payload[\\\"show_message\\\"] = \\\"ไม่พบข้อมูลใบหน้า\\\"\\nelse :\\n    for objs in objects :\\n        sql = \\\"select * from tbl_students where std_code = %s\\\"\\n        val = (objs[\\\"name\\\"], )\\n        mycursor.execute(sql,val)\\n        records = mycursor.fetchall()\\n        if (mycursor.rowcount <= 0) :\\n            print(\\\"ไม่พบข้อมูล \\\",objs[\\\"name\\\"],\\\"ในฐานข้อมูล\\\")\\n        else :\\n            std_name = records[0][1]+records[0][2]+\\\" \\\"+records[0][3] \\n            sql = \\\"select datetime, send_line from tbl_checkin where std_code = %s and DATE(datetime) = %s \\\"\\n            val = (objs[\\\"name\\\"], dd.strftime(\\\"%Y-%m-%d\\\"), )\\n            mycursor.execute(sql,val)\\n            records = mycursor.fetchall()\\n            if (mycursor.rowcount <=0):\\n                sql = \\\"insert into tbl_checkin (check_id, datetime, std_code, send_line) values(NULL, %s, %s, '0')\\\"\\n                val = (dd.strftime(\\\"%Y-%m-%d %H:%M\\\"), objs[\\\"name\\\"], )\\n                mycursor.execute(sql,val)\\n                mydb.commit()\\n            \\n                \\n                msg = \\\"บันทึกข้อมูลลงเวลา ของ \\\"+std_name+\\\" เมื่อ \\\"+dd.strftime(\\\"%Y-%m-%d %H:%M\\\")\\n                sl = sendline(msg)\\n            \\n                if(sl) :\\n                    sql = \\\"update tbl_checkin set send_line = '1' where std_code = %s\\\"\\n                    val = (objs[\\\"name\\\"], )\\n                    mycursor.execute(sql,val)\\n                    mydb.commit()\",\n                \"width\": 75\n            },\n            \"ngo\": {\n                \"comment\": {\n                    \"data\": \"\",\n                    \"show\": false\n                }\n            },\n            \"position\": {\n                \"x\": -18.62300000000001,\n                \"y\": -110.913\n            }\n        }\n    ],\n    \"scene_data\": {\n        \"flow_view_pos_x\": -84.46409999999977,\n        \"flow_view_pos_y\": -252.30499999999938,\n        \"flow_view_zoom_factor\": 0.9090909090909091\n    }\n}\n",
            "name": "Main"
        }
    ]
}
